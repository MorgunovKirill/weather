(function(){"use strict";var t={224:function(t,e,s){var a=s(6369),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"weather-widgets"},[t.settingsMode?e("button",{staticClass:"weather-widgets__toggle",attrs:{type:"button"},on:{click:function(e){return t.toggleSettingsMode(!1)}}},[e("img",{staticClass:"settings-list__move",attrs:{src:s(7204),width:"18",height:"18",alt:"закрыть меню"}})]):e("button",{staticClass:"weather-widgets__toggle",attrs:{type:"button"},on:{click:function(e){return t.toggleSettingsMode(!0)}}},[e("img",{staticClass:"settings-list__move",attrs:{src:s(4262),width:"32",height:"32",alt:"открыть меню"}})])]),t.settingsMode?e("SettingsList",{attrs:{"saved-widgets":t.savedWidgets},on:{addWidget:t.addWidget,removeWidget:t.removeWidget}}):e("WeatherWidgetsList",{attrs:{"saved-widgets":t.savedWidgets}})],1)])},n=[],r=(s(7658),function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings"},[e("h2",{staticClass:"heading"},[t._v("Settings")]),e("draggable",{staticClass:"settings-list",attrs:{list:t.savedWidgets,ghostClass:"on-drag",animation:"400",options:{handle:".handle"}},on:{end:t.onEnd}},t._l(t.savedWidgets,(function(a,i){return e("div",{key:i,staticClass:"settings-list__item",attrs:{"data-order":a.order}},[e("img",{staticClass:"settings-list__move handle",attrs:{src:s(2898),alt:"передвинуть",width:"16",height:"16"}}),e("span",{staticClass:"settings-list__city"},[t._v(t._s(a.city)+" "+t._s(a.country))]),e("img",{staticClass:"settings-list__delete",attrs:{src:s(5588),alt:"удалить",width:"30",height:"25"},on:{click:function(e){return t.removeWidget(a.city)}}})])})),0),e("search-component",{on:{submitQuery:t.addLocation}})],1)}),o=[],c=s(6983),d=s.n(c),l=function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticClass:"heading"},[t._v("Add location:")]),e("div",{staticClass:"form-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"text"},domProps:{value:t.searchQuery},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitQuery.apply(null,arguments)},input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),e("button",{directives:[{name:"show",rawName:"v-show",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-input__submit",on:{click:t.submitQuery}},[e("img",{attrs:{src:s(345),alt:"искать"}})])])])},u=[],h={name:"SearchComponent",data(){return{searchQuery:""}},methods:{submitQuery(){this.$emit("submitQuery",this.searchQuery),this.searchQuery=""}}},g=h,p=s(1001),v=(0,p.Z)(g,l,u,!1,null,"7d0672c2",null),f=v.exports,m=s(4161);const _="b1dfa8e82bb034221596bf3cec9b453e",y=async(t,e)=>m.Z.get(`http://api.openweathermap.org/geo/1.0/reverse?lat=${t}&lon=${e}&limit=1&appid=${_}`).then((t=>t.data[0])),w=async(t,e="",s="")=>m.Z.get(`http://api.openweathermap.org/geo/1.0/direct?q=${t},${e},${s}&limit=1&appid=${_}`).then((t=>t.data[0])),b=(t,e)=>m.Z.get(`https://api.openweathermap.org/data/3.0/onecall?lat=${t}&lon=${e}&units=metric&exclude=minutely,hourly,daily,alerts&appid=${_}`).then((t=>t.data.current));var C={name:"SettingsList",props:{savedWidgets:Array},components:{SearchComponent:f,draggable:d()},data(){return{}},methods:{removeWidget(t){this.$emit("removeWidget",t)},async addLocation(t){const{lat:e,lon:s,state:a,country:i}=await w(t),n=await y(e,s),r=await b(e,s);r.city=n.local_names.en,r.state=a,r.country=i,r.order=this.savedWidgets.length,this.$emit("addWidget",r)},onEnd(t){t.newIndex,t.oldIndex}}},W=C,S=(0,p.Z)(W,r,o,!1,null,"59054d51",null),x=S.exports,L=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"weather-list"},t._l(t.savedWidgets,(function(t,s){return e("li",{key:s,staticClass:"weather-list__item"},[e("WeatherCard",{attrs:{data:t}})],1)})),0)},O=[],k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"weather-card"},[e("h3",{staticClass:"weather-card__city"},[t._v(t._s(t.data.city)+", "+t._s(t.data.country))]),e("div",{staticClass:"weather-card__temp"},[e("div",{staticClass:"weather-card__icon"},[e("img",{attrs:{src:`https://openweathermap.org/img/wn/${t.data.weather[0].icon}@2x.png`,alt:"weather-icon"}})]),e("span",{staticClass:"weather-card__temp-value"},[t._v(t._s(Math.floor(parseInt(t.data.temp)))+" °C")])]),e("p",{staticClass:"weather__description"},[t._v("Feels like: "+t._s(Math.floor(parseInt(t.data.feels_like))))]),e("div",{staticClass:"weather__wind-info"},[e("span",{staticClass:"weather__sse"},[t._v("Wind speed: "+t._s(t.data.wind_speed)+" m/s SSE")]),e("span",{staticClass:"weather__hpa"},[t._v("Pressure: "+t._s(t.data.pressure)+" hPa")])]),e("div",{staticClass:"weather__humidity-info"},[e("span",{staticClass:"weather__humidity-value"},[t._v("Humidity: "+t._s(t.data.humidity)+"%")]),e("span",{staticClass:"weather__dew-point"},[t._v("Dew point: "+t._s(t.data.dew_point)+" °С")])]),e("div",{staticClass:"weather__visibility"},[t._v("Visibility: "+t._s(Math.floor(parseInt(t.data.visibility))/1e3)+" km")])])},$=[],Q={name:"WeatherCard",props:{data:Object,city:String},data(){return{}},methods:{}},M=Q,P=(0,p.Z)(M,k,$,!1,null,"35161f1b",null),Z=P.exports,j={name:"WeatherWidgetsList",components:{WeatherCard:Z},props:{savedWidgets:Array},data(){return{}},methods:{}},I=j,N=(0,p.Z)(I,L,O,!1,null,"269e827a",null),E=N.exports;const J=t=>{if("undefined"!==typeof Storage)return localStorage.getItem(t);window.alert("Please use a modern browser to properly view this template!")},T=(t,e)=>{"undefined"!==typeof Storage?localStorage.setItem(t,e):window.alert("Please use a modern browser to properly view this template!")};var A={name:"App",components:{WeatherWidgetsList:E,SettingsList:x},data(){return{localWeather:null,currentLat:null,currentLong:null,settingsMode:!1,savedWidgets:[]}},mounted(){const t=J("locationsList");if(t&&JSON.parse(t).length)this.savedWidgets=JSON.parse(t);else{const t=async t=>{this.currentLat=t.coords.latitude,this.currentLong=t.coords.longitude,await this.getCurrentLocationData(),this.savedWidgets.push(this.localWeather),T("locationsList",JSON.stringify(this.savedWidgets))},e=t=>{console.log(t)};navigator.geolocation.getCurrentPosition(t,e)}},methods:{toggleSettingsMode(t){this.settingsMode=t},addWidget(t){this.savedWidgets.push(t),T("locationsList",JSON.stringify(this.savedWidgets))},removeWidget(t){this.savedWidgets=this.savedWidgets.filter((e=>e.city!==t)),T("locationsList",JSON.stringify(this.savedWidgets))},async getCurrentLocationData(){const t=await y(this.currentLat,this.currentLong);this.localWeather=await b(this.currentLat,this.currentLong),this.localWeather.city=t.name,this.localWeather.state=t.state,this.localWeather.country=t.country,this.localWeather.order=0}}},D=A,F=(0,p.Z)(D,i,n,!1,null,null,null),q=F.exports;a.ZP.config.productionTip=!1,new a.ZP({render:t=>t(q)}).$mount("#app")},4262:function(t,e,s){t.exports=s.p+"img/gear.0f9dd18e.svg"},345:function(t,e,s){t.exports=s.p+"img/icon-arrow.831bb9d8.svg"},7204:function(t,e,s){t.exports=s.p+"img/icon-cross.a74572a5.svg"},2898:function(t,e,s){t.exports=s.p+"img/menu.2ace7bec.svg"},5588:function(t,e,s){t.exports=s.p+"img/trash.0c56b541.svg"}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,n){if(!a){var r=1/0;for(l=0;l<t.length;l++){a=t[l][0],i=t[l][1],n=t[l][2];for(var o=!0,c=0;c<a.length;c++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(o=!1,n<r&&(r=n));if(o){t.splice(l--,1);var d=i();void 0!==d&&(e=d)}}return e}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[a,i,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/weather/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,r=a[0],o=a[1],c=a[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var l=c(s)}for(e&&e(a);d<r.length;d++)n=r[d],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(l)},a=self["webpackChunkweather"]=self["webpackChunkweather"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(224)}));a=s.O(a)})();
//# sourceMappingURL=app.3291aca4.js.map